<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>TAYFUN TOPRAKCIOGLU</title>
<link rel="icon" href="https://avatars.githubusercontent.com/u/9512451?v=4" type="image/png" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" />
<style>
  :root{ --text:#111; --muted:#5a6270; --accent:#ff8a00; --accent-soft:#ffb566; --modal-bg:rgba(17,17,17,.62); }
  html,body{height:100%} *{box-sizing:border-box}
  body{ margin:0; color:var(--text); font-family:ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans"; background:#fff; overflow:hidden }

  /* Turuncu arkaplan */
  body::before, body::after{
    content:""; position:fixed; left:0; right:0; height:52vh; pointer-events:none; z-index:0;
    animation:floatBand 14s ease-in-out infinite alternate;
  }
  body::before{ top:-12vh; background:radial-gradient(120% 80% at 50% 0%, rgba(255,138,0,.38), rgba(255,138,0,.20) 32%, transparent 70%) }
  body::after { bottom:-12vh; animation-duration:16s; background:radial-gradient(120% 80% at 50% 100%, rgba(255,138,0,.38), rgba(255,138,0,.20) 32%, transparent 70%) }
  @keyframes floatBand{0%{transform:translateY(0)}100%{transform:translateY(4vh)}}
  .grain{ position:fixed; inset:0; z-index:0; pointer-events:none; opacity:.08;
    background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="140" height="140"><filter id="n"><feTurbulence type="fractalNoise" baseFrequency="0.9" numOctaves="2" stitchTiles="stitch"/></filter><rect width="100%" height="100%" filter="url(%23n)" opacity="0.38"/></svg>');
    background-size:220px 220px; animation:grainShift 6s linear infinite }
  @keyframes grainShift{0%{transform:translate(0,0)}50%{transform:translate(-2%,1%)}100%{transform:translate(0,0)}}

  .stage{position:relative; z-index:1; height:100%; width:100%; overflow:hidden}
  .main{ position:absolute; inset:0; display:flex; flex-direction:column; align-items:center; justify-content:center; text-align:center; padding:24px; animation:fadeIn .9s ease both }
  @keyframes fadeIn{from{opacity:0; transform:translateY(8px)} to{opacity:1; transform:none}}
  .pull-up{ animation:pullUp 2s ease forwards }
  @keyframes pullUp{0%{transform:translateY(0) scale(1); filter:blur(0)}100%{transform:translateY(-110vh) scale(.95); filter:blur(12px)}}

  /* Viewer */
  .viewer{ position:absolute; inset:0; z-index:2; display:none; background:#fff }
  .viewer.show{ display:block }
  .viewer .bar{ position:relative; height:54px; display:flex; align-items:center; padding:0 14px; border-bottom:1px solid rgba(0,0,0,.08); background:linear-gradient(180deg,#fff,#fff8f1) }
  .viewer .brand{ position:absolute; left:50%; transform:translateX(-50%); white-space:nowrap; font-weight:800; letter-spacing:.6px }
  .viewer .brand a{ color:#111; text-decoration:none; padding:8px 12px; border-radius:10px } /* geniş hit-area */
  .progress{ position:absolute; left:0; right:0; top:54px; height:3px; background:rgba(0,0,0,.06); overflow:hidden }
  .progress span{ display:block; width:35%; height:100%; background:linear-gradient(90deg,var(--accent),var(--accent-soft)); animation:indet 1.1s ease-in-out infinite }
  @keyframes indet{0%{transform:translateX(-100%)}100%{transform:translateX(300%)}}
  .viewer iframe{ position:absolute; top:57px; left:0; right:0; bottom:0; width:100%; height:calc(100% - 57px); border:0 }

  /* Profil + halka */
  .profile-pic{ width:180px; aspect-ratio:1/1; border-radius:50%; position:relative; margin:0 auto 14px; overflow:visible; transition:transform .22s ease }
  .profile-pic:hover{ transform:scale(1.03) }
  .profile-pic img{ width:100%; height:100%; object-fit:cover; border-radius:50%; display:block; box-shadow:0 10px 40px rgba(0,0,0,.12) }
  .profile-pic::before{
    content:""; position:absolute; inset:-8px; border-radius:50%;
    background:conic-gradient(from 0deg, var(--accent), var(--accent-soft), var(--accent));
    -webkit-mask:radial-gradient(farthest-side, transparent calc(100% - 8px), #000 0);
    mask:radial-gradient(farthest-side, transparent calc(100% - 8px), #000 0);
    filter:drop-shadow(0 0 16px rgba(255,138,0,.32));
    animation:spin 4s linear infinite;
  }
  .profile-pic.pulse::before{ animation:spin 4s linear infinite, glowPulse 1.2s ease-out 1 }
  @keyframes spin{to{transform:rotate(1turn)}}
  @keyframes glowPulse{0%{box-shadow:0 0 0 0 rgba(255,138,0,.0)}60%{box-shadow:0 0 18px 6px rgba(255,138,0,.40)}100%{box-shadow:0 0 0 0 rgba(255,138,0,.0)}}

  /* Konuşma balonu */
  .hello{ position:absolute; right:-6px; top:-6px; transform:translate(40%,-40%); z-index:3; background:#111; color:#fff; padding:7px 10px; border-radius:12px; font-size:.85rem; white-space:nowrap; box-shadow:0 8px 20px rgba(0,0,0,.18); opacity:0; animation:helloPop .6s ease .4s forwards }
  .hello::after{ content:""; position:absolute; right:16px; bottom:-6px; border:6px solid transparent; border-top-color:#111 }
  @keyframes helloPop{from{transform:translate(40%,-60%) scale(.9); opacity:0} to{transform:translate(40%,-40%) scale(1); opacity:1}}

  /* Başlık – periyodik glitch */
  h1#name{ margin:8px 0 6px; line-height:1.05; font-size:clamp(2.2rem,6vw,4rem); letter-spacing:.6px; font-weight:800; color:#111; position:relative; display:inline-block; filter:drop-shadow(0 6px 18px rgba(0,0,0,.05)) }
  h1#name.glitch{ animation:glitch-skew 450ms steps(1,end) 1 }
  h1#name.glitch::before, h1#name.glitch::after{ content:attr(data-text); position:absolute; top:0; left:0; right:0 }
  h1#name.glitch::before{ text-shadow:-2px 0 var(--accent); clip-path:inset(0 0 60% 0); animation:glitch-a 450ms steps(2,end) 1 }
  h1#name.glitch::after{ text-shadow:2px 0 var(--accent-soft); clip-path:inset(40% 0 0 0); animation:glitch-b 450ms steps(2,end) 1 }
  @keyframes glitch-skew{0%{transform:skew(0)}20%{transform:skew(-2deg)}40%{transform:skew(2deg)}60%{transform:skew(-1deg)}80%{transform:skew(1deg)}100%{transform:skew(0)}}
  @keyframes glitch-a{0%{transform:translate(-2px,-1px)}50%{transform:translate(2px,1px)}100%{transform:translate(0,0)}}
  @keyframes glitch-b{0%{transform:translate(2px,1px)}50%{transform:translate(-2px,-1px)}100%{transform:translate(0,0)}}

  h2{ margin:0 0 14px; font-weight:700; font-size:clamp(1.1rem,3.2vw,2rem); color:#2a2e36 }
  #intro{ max-width:880px; margin:8px auto 6px; color:var(--muted) }
  #intro .l1{ font-size:clamp(1.05rem,2.6vw,1.4rem); font-style:italic; line-height:1.6; display:block }
  #intro .l2{ font-size:clamp(1rem,2.2vw,1.2rem); margin-top:10px; display:block }

  /* Sosyal ikonlar + rozetler (masaüstü) */
  .social-wrap{ position:relative; margin-top:14px }
  .social-icons{ display:flex; gap:12px; align-items:center; justify-content:center }
  .social-icons a{ width:48px; height:48px; display:grid; place-items:center; border-radius:12px; text-decoration:none; color:#222; background:linear-gradient(180deg, rgba(0,0,0,.04), rgba(0,0,0,.01)); border:1px solid rgba(0,0,0,.08); box-shadow:0 8px 20px rgba(0,0,0,.08); transition:transform .15s ease, box-shadow .18s ease, background .18s ease; outline:none; position:relative }
  .social-icons a:hover{ transform:translateY(-2px) }
  .social-icons a:focus{ box-shadow:0 0 0 3px rgba(255,138,0,.25) }
  .social-icons a::after{ content:attr(aria-label); position:absolute; left:50%; bottom:calc(100% + 10px); transform:translate(-50%,6px); background:#111; color:#fff; font-size:.78rem; padding:6px 8px; border-radius:8px; opacity:0; visibility:hidden; white-space:nowrap; pointer-events:none; transition:opacity .15s ease, transform .15s ease, visibility .15s ease }
  .social-icons a:hover::after, .social-icons a:focus::after{ opacity:1; visibility:visible; transform:translate(-50%,0) }
  .key{ position:absolute; right:-6px; bottom:-6px; font-size:10px; line-height:1; background:#111; color:#fff; padding:3px 4px; border-radius:6px; font-weight:700 }
  @media (pointer:coarse){ .key{ display:none } } /* mobilde gizle */

  /* Nudge */
  #nudge{ position:absolute; left:50%; top:-46px; transform:translateX(-50%) translateY(6px); background:#111; color:#fff; padding:8px 12px; border-radius:10px; font-size:.85rem; opacity:0; pointer-events:none; white-space:nowrap; box-shadow:0 8px 20px rgba(0,0,0,.18); transition:opacity .25s ease, transform .25s ease }
  #nudge::after{ content:""; position:absolute; left:50%; top:100%; transform:translateX(-50%); border:6px solid transparent; border-top-color:#111 }
  #nudge.show{ opacity:1; transform:translateX(-50%) translateY(0) }

  /* Alıntı */
  .quote{ position:absolute; left:24px; right:24px; bottom:24px; z-index:1; max-width:1200px; margin:0 auto; font-size:clamp(.95rem,2.2vw,1.15rem); font-style:italic; color:#444; text-align:center }
  .author{ font-family:ui-monospace, Menlo, Consolas, "SFMono-Regular"; color:#666; font-size:.95em }

  /* Modal */
  .modal{ position:fixed; inset:0; z-index:50; display:none; background:var(--modal-bg); backdrop-filter:blur(4px) }
  .modal.show{ display:block }
  .modal .box{ position:absolute; left:50%; top:50%; transform:translate(-50%,-50%); width:min(700px,92vw); background:#fff; border:1px solid rgba(0,0,0,.08); border-radius:16px; padding:18px 16px; box-shadow:0 20px 60px rgba(0,0,0,.25) }
  .modal .content{ display:flex; align-items:center; gap:18px }
  .modal .left{ flex:1 1 auto }
  .modal .row{ margin:10px 0; color:#333 }
  .modal .row .mail{ background:#fff4ea; padding:4px 6px; border-radius:6px; color:#111; text-decoration:none }
  .modal .hint{ margin-top:4px; font-size:.9rem; color:#666 }
  .modal .qr{ flex:0 0 auto }
  .modal .qr img{ width:140px; height:140px }
  .modal .actions{ display:flex; gap:10px; justify-content:flex-end; margin-top:14px }
  .modal button{ appearance:none; border:1px solid rgba(0,0,0,.12); background:#fff; color:#111; border-radius:10px; padding:8px 12px; cursor:pointer }
  @media (max-width:700px){ .modal .qr, .modal .hint{ display:none } }
  @media (max-width:600px){ .profile-pic{width:140px} .social-icons{gap:10px} .quote{left:14px; right:14px; bottom:14px} }

  /* SR-only canlı bölge (ekran okuyucu için) */
  .sr-only{ position:absolute !important; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0 }

  /* Ses butonu – başta görünür, TTS başlayınca gizlenir */
  .voice-btn{ position:fixed; right:16px; bottom:16px; z-index:60; display:block; background:#111; color:#fff; border-radius:12px; padding:10px 12px; font-weight:600; cursor:pointer; box-shadow:0 10px 28px rgba(0,0,0,.22) }
  .voice-btn.hide{ display:none }
</style>
</head>
<body>
  <div class="grain" aria-hidden="true"></div>

  <!-- Ekran okuyucular için canlı bölge -->
  <div id="sr-intro" class="sr-only" aria-live="assertive"></div>

  <div class="stage">
    <div class="main" id="main">
      <div class="profile-pic" id="pfp">
        <span class="hello" id="hello">Merhaba 👋</span>
        <img src="https://avatars.githubusercontent.com/u/9512451?v=4" alt="Profile Picture" />
      </div>

      <h1 id="name" data-text="TAYFUN TOPRAKCIOGLU">TAYFUN TOPRAKCIOGLU</h1>
      <h2>Developer</h2>

      <p id="intro">
        <span class="l1">Merhaba! Geliştirici, tasarım meraklısı ve sosyal medya uzmanıyım.</span>
        <span class="l2">İletişime geçmekten çekinmeyin.</span>
      </p>

      <div class="social-wrap">
        <div id="nudge" aria-hidden="true">İletişime geçin</div>
        <nav class="social-icons" aria-label="Sosyal Bağlantılar" id="icons">
          <a id="lnBtn" href="https://www.linkedin.com/in/tayfuntoprakcioglu/" target="_blank" rel="noreferrer noopener" aria-label="LinkedIn 🔗"><i class="fab fa-linkedin"></i><span class="key">L</span></a>
          <a id="igBtn" href="https://www.instagram.com/tayfuntoprakcioglu" target="_blank" rel="noreferrer noopener" aria-label="Instagram 📷"><i class="fab fa-instagram"></i><span class="key">I</span></a>
          <a id="ghBtn" href="https://github.com/tayfuntoprakcioglu" target="_blank" rel="noreferrer noopener" aria-label="GitHub 🧩"><i class="fab fa-github"></i><span class="key">G</span></a>
          <a href="#" id="blogBtn" aria-label="Blog 📝"><i class="fa-solid fa-square-rss"></i><span class="key">B</span></a>
          <a href="#" id="aiBtn" aria-label="AI 🤖">✨<span class="key">A</span></a>
          <a href="#" id="mailBtn" aria-label="E-posta ✉️"><i class="fa-solid fa-envelope"></i><span class="key">M</span></a>
        </nav>
      </div>

      <div class="quote" id="quote-text"></div>
    </div>

    <!-- Viewer -->
    <div class="viewer" id="viewer">
      <div class="bar">
        <div class="brand"><a href="#" id="brandHome" title="Anasayfa (H)">TAYFUN TOPRAKCIOGLU</a></div>
      </div>
      <div class="progress" id="progress"><span></span></div>
      <iframe id="viewerFrame" src="about:blank" loading="lazy" referrerpolicy="no-referrer"></iframe>
    </div>
  </div>

  <!-- İletişim Modalı -->
  <div class="modal" id="contactModal" aria-hidden="true">
    <div class="box" role="dialog" aria-modal="true" aria-labelledby="contactTitle">
      <h3 id="contactTitle">İletişim</h3>
      <div class="content">
        <div class="left">
          <div class="row" id="contactText">Bana e-posta yoluyla ulaşabilirsiniz.</div>
          <div class="row"><strong>E-posta:</strong> <a class="mail" href="mailto:info@tayfuntoprakcioglu.com">info@tayfuntoprakcioglu.com</a></div>
          <div class="row hint" id="qrHint">Telefonunuzla <strong>QR kodunu okutun</strong> veya e-postayı kopyalayın.</div>
        </div>
        <div class="qr"><img id="qrImg" alt="E-posta QR" width="140" height="140" loading="lazy" /></div>
      </div>
      <div class="actions">
        <button id="copyMail">E-postayı kopyala</button>
        <button id="closeContact">Kapat</button>
      </div>
    </div>
  </div>

  <!-- Ses düğmesi (TTS otomatik başlamazsa görünür kalır) -->
  <button id="voiceBtn" class="voice-btn">🔊 Dinle</button>

<script>
  /* Dil */
  var userLang = navigator.language || navigator.userLanguage;
  var lang = userLang ? userLang.toLowerCase() : "tr";
  var isTR = lang.indexOf("tr") === 0;

  /* Selam döngüsü */
  (function helloCycle(){
    var hello = document.getElementById("hello");
    var msgs = ["Merhaba 👋","Hello 👋","Hola 👋","Bonjour 👋","Hallo 👋","Привет 👋","مرحبا 👋","Ciao 👋"];
    if(!isTR){ msgs.unshift("Hello 👋"); }
    var i=0; function tick(){ hello.textContent=msgs[i]; i=(i+1)%msgs.length; setTimeout(tick,2000) } tick();
  })();

  /* Alıntılar */
  var quotes = { en:[{text:"A computer is like a bicycle for the mind.",author:"Steve Jobs"},{text:"Technology is best when it brings people together.",author:"Matt Mullenweg"},{text:"The purpose of computing is insight, not numbers.",author:"Richard Hamming"}],
                 tr:[{text:"Bir bilgisayar, akıl için bir bisiklet gibidir.",author:"Steve Jobs"},{text:"Teknoloji, insanları bir araya getirdiğinde en iyisidir.",author:"Matt Mullenweg"},{text:"Hesaplamanın amacı içgörü kazanmaktır, sayılar değil.",author:"Richard Hamming"}]};
  function readDelay(t){ var w=t.split(/\s+/).length; var s=Math.floor(w*0.5); if(s<5){s=5} return s*1000 }
  ;(function cycleQuote(){
    var set = isTR?quotes.tr:quotes.en, arr=set.slice(), m=arr.length;
    while(m>0){ m-=1; var i=Math.floor(Math.random()*(m+1)); var tmp=arr[m]; arr[m]=arr[i]; arr[i]=tmp }
    var idx=0, q=document.getElementById("quote-text"), dir=1;
    function show(){
      var it=arr[idx]; if(!it){ idx=0; it=arr[idx] }
      var author=it.author?" <span class='author'>— "+it.author+"</span>":" <span class='author'>— Anonim</span>";
      var from=dir>0?"-16px":"16px"; dir*=-1;
      q.animate([{opacity:0, transform:"translateY("+from+")"}, {opacity:1, transform:"translateY(0)"}], {duration:420, easing:"ease"});
      q.innerHTML=it.text+author;
      setTimeout(function(){ idx=(idx+1)%arr.length; show() }, readDelay(it.text))
    } show()
  })();

  /* Nudge */
  (function nudge(){
    var el=document.getElementById("nudge"), wrap=document.getElementById("icons");
    if(!el||!wrap){return} el.textContent=isTR?"İletişime geçin":"Get in touch";
    var t=setTimeout(function(){el.classList.add("show")},3000);
    function hide(){el.classList.remove("show"); clearTimeout(t)}
    wrap.addEventListener("mouseenter",hide); wrap.addEventListener("click",hide); wrap.addEventListener("focusin",hide);
  })();

  /* Glitch + profil pulse zinciri */
  (function effectsChain(){
    var nameEl=document.getElementById("name"), pfp=document.getElementById("pfp");
    function pulseProfile(){ pfp.classList.remove("pulse"); void pfp.offsetWidth; pfp.classList.add("pulse"); }
    function glitchOnce(){
      nameEl.classList.add("glitch");
      setTimeout(function(){
        nameEl.classList.remove("glitch");
        setTimeout(pulseProfile,1000);
        var next=3000+Math.floor(Math.random()*1000);
        setTimeout(glitchOnce,next);
      }, 500);
    } glitchOnce();
  })();

  /* Mail: mobilde direkt mail; desktopta modal + QR */
  (function contact(){
    var openBtn=document.getElementById("mailBtn"), modal=document.getElementById("contactModal");
    var closeBtn=document.getElementById("closeContact"), copyBtn=document.getElementById("copyMail");
    var title=document.getElementById("contactTitle"), text=document.getElementById("contactText"), qr=document.getElementById("qrImg"), hint=document.getElementById("qrHint");
    if(isTR){ title.textContent="İletişim"; text.textContent="Bana e-posta yoluyla ulaşabilirsiniz."; copyBtn.textContent="E-postayı kopyala"; closeBtn.textContent="Kapat"; }
    else { title.textContent="Contact"; text.textContent="You can reach me via e-mail."; copyBtn.textContent="Copy e-mail"; closeBtn.textContent="Close"; hint.textContent="Scan the QR code or copy the e-mail below." }
    var mail="info@tayfuntoprakcioglu.com";
    var qrData="MATMSG:TO:"+mail+";SUB:;BODY:;";
    qr.src="https://api.qrserver.com/v1/create-qr-code/?size=160x160&data="+encodeURIComponent(qrData);
    function isMobile(){ return /Android|iPhone|iPad|iPod|Windows Phone/i.test(navigator.userAgent) || ((navigator.maxTouchPoints||0)>1 && window.innerWidth<768) }
    function open(){ modal.classList.add("show") } function close(){ modal.classList.remove("show") }
    openBtn.addEventListener("click", function(e){ e.preventDefault(); if(isMobile()){ window.location.href="mailto:"+mail } else { open() } });
    closeBtn.addEventListener("click", close);
    modal.addEventListener("click", function(e){ if(e.target===modal){ close() } });
    copyBtn.addEventListener("click", function(){ try{ navigator.clipboard.writeText(mail); copyBtn.textContent=isTR?"Kopyalandı ✓":"Copied ✓"; setTimeout(function(){ copyBtn.textContent=isTR?"E-postayı kopyala":"Copy e-mail" }, 1200) }catch(err){} });
  })();

  /* Viewer (AI & Blog) – marka tıklanınca geri; H veya Esc de */
  (function viewer(){
    var viewer=document.getElementById("viewer"), frame=document.getElementById("viewerFrame");
    var prog=document.getElementById("progress"), main=document.getElementById("main");
    var aiBtn=document.getElementById("aiBtn"), blogBtn=document.getElementById("blogBtn"), brand=document.getElementById("brandHome");
    function back(){ viewer.classList.remove("show"); prog.style.display="none"; frame.src="about:blank"; main.classList.remove("pull-up") }
    aiBtn.addEventListener("click", function(e){ e.preventDefault(); viewer.classList.add("show"); prog.style.display="block"; frame.src="https://www.tayfuntoprakcioglu.com/ai/" });
    blogBtn.addEventListener("click", function(e){ e.preventDefault(); main.classList.add("pull-up"); setTimeout(function(){ viewer.classList.add("show"); prog.style.display="block"; frame.src="https://blog.tayfuntoprakcioglu.com/" }, 2000) });
    frame.addEventListener("load", function(){ prog.style.display="none" });
    brand.addEventListener("click", function(e){ e.preventDefault(); back() });
    document.addEventListener("keydown", function(e){ var k=(e.key||"").toLowerCase(); if(k==="escape"||k==="h"){ back() } });
  })();

  /* Kısayol tuşları: L/I/G/B/A/M/H/Q */
  document.addEventListener("keydown", function(e){
    var k=(e.key||"").toLowerCase();
    if(k==="l"){ document.getElementById("lnBtn").click() }
    if(k==="i"){ document.getElementById("igBtn").click() }
    if(k==="g"){ document.getElementById("ghBtn").click() }
    if(k==="b"){ document.getElementById("blogBtn").click() }
    if(k==="a"){ document.getElementById("aiBtn").click() }
    if(k==="m"){ document.getElementById("mailBtn").click() }
    if(k==="h"){ document.getElementById("brandHome").click() }
    if(k==="q"){ try{ window.speechSynthesis && window.speechSynthesis.cancel() }catch(_){ } }
  });

  /* --- Erişilebilirlik: otomatik ses + daha doğal ses seçimi --- */
  (function narrator(){
    var synth=window.speechSynthesis, btn=document.getElementById("voiceBtn"), started=false, voice=null;

    /* Ekran okuyucuya ilk anons (otomatik) */
    var sr=document.getElementById("sr-intro");
    sr.textContent = isTR
      ? "Tayfun Toprakcıoğlu ana sayfası. Klavye kısayolları: L LinkedIn, I Instagram, G GitHub, B Blog, A Yapay Zeka, M Mail, H Anasayfa. Q ile sesi durdurabilirsiniz."
      : "Tayfun Toprakcioglu home. Shortcuts: L LinkedIn, I Instagram, G GitHub, B Blog, A AI, M Mail, H Home. Press Q to stop voice.";

    function chooseVoice(){
      if(!synth) return;
      var vs=synth.getVoices();
      if(!vs || !vs.length) return;
      var pref = vs.filter(v=>{
        var n=(v.name||"").toLowerCase(), L=(v.lang||"").toLowerCase();
        var want = isTR ? L.startsWith("tr") : L.startsWith("en");
        var nat = n.includes("google") || n.includes("microsoft") || n.includes("natural") || n.includes("neural");
        return want && nat;
      });
      voice = pref[0] || vs.find(v=>(isTR?v.lang.toLowerCase().startsWith("tr"):v.lang.toLowerCase().startsWith("en"))) || vs[0];
    }
    chooseVoice();
    if(typeof synth !== "undefined"){ synth.onvoiceschanged = chooseVoice; }

    function speak(text){
      if(!synth) return false;
      try{
        var u=new SpeechSynthesisUtterance(text);
        if(voice){ u.voice=voice; u.lang=voice.lang }
        else { u.lang=isTR?"tr-TR":"en-US" }
        u.rate=0.98; u.pitch=1.0; u.volume=1.0;
        synth.cancel();
        synth.speak(u);
        /* Chrome iOS/Android resume hack */
        var iv=setInterval(function(){ try{ synth.resume(); if(!synth.speaking) clearInterval(iv); }catch(e){ clearInterval(iv) } }, 300);
        return true;
      }catch(e){ return false; }
    }

    function start(){
      if(started) return;
      started = true;
      var text = isTR
        ? "Tayfun Toprakcıoğlu, geliştirici. Kısayollar: L LinkedIn, I Instagram, G GitHub, B blog, A yapay zeka, M mail, H anasayfa. Q tuşu sesi durdurur."
        : "Tayfun Toprakcioglu, developer. Shortcuts: L LinkedIn, I Instagram, G GitHub, B blog, A A I, M mail, H home. Press Q to stop voice.";
      var ok = speak(text);
      if(ok){ btn.classList.add("hide"); }
    }

    /* Oto başlatmayı hemen dene (masaüstünde genelde çalışır) */
    window.addEventListener("load", function(){ setTimeout(start, 250); });

    /* İlk kullanıcı etkileşiminde tekrar dener (mobil blokajı aşmak için) */
    function arm(){ start(); document.removeEventListener("pointerdown", arm); document.removeEventListener("keydown", arm) }
    document.addEventListener("pointerdown", arm, {once:true});
    document.addEventListener("keydown", arm, {once:true});

    /* Butonla manuel başlatma */
    btn.addEventListener("click", start);
  })();
</script>
</body>
</html>
